{"ast":null,"code":"import _slicedToArray from\"D:\\\\Documents\\\\Classes\\\\SimpleSchedule\\\\employee\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Redirect}from'react-router-dom';import logo from'./../images/Slogo.png';import Axios from'axios';var Login=function Login(props){var newJwtNotify=props.newJwtNotify;var _useState=useState('unclefifi'),_useState2=_slicedToArray(_useState,2),userid=_useState2[0],setUserId=_useState2[1];var _useState3=useState('password'),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),errors=_useState6[0],setErrors=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isRedirectingHome=_useState8[0],setToHome=_useState8[1];var changeField=function changeField(fieldName,eventDetails){if(eventDetails&&eventDetails.target&&typeof eventDetails.target.value===\"string\"){var value=eventDetails.target.value;if(fieldName==='userId'){setUserId(value);}else if(fieldName==='password'){setPassword(value);}}};var logInApiRequest=function logInApiRequest(){Axios.post('/api/users/authenticate',{userid:userid,password:password}).then(function(apiResponse){var jwt=apiResponse.data;newJwtNotify(jwt);setToHome(true);}).catch(function(apiError){// errors is an array of { msg: string }\nif(apiError&&apiError.response&&apiError.response.data&&apiError.response.data.errors){setErrors(apiError.response.data.errors.map(function(x){return x.msg;}));}});};var _errorsBuild=function _errorsBuild(){return errors.map(function(e,i){return/*#__PURE__*/React.createElement(\"div\",{key:e},i+1,\".) \",e);});};var buildForm=function buildForm(){return/*#__PURE__*/React.createElement(\"div\",{className:\"flexbox-wrapper flexbox-item vertical\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flexbox-item\"},/*#__PURE__*/React.createElement(\"img\",{id:\"loginLogo\",src:logo,alt:\"Logo\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"flexbox-centered flexbox-wrapper\"},/*#__PURE__*/React.createElement(\"div\",{className:\"flexbox-wrapper login vertical\"},/*#__PURE__*/React.createElement(\"h3\",null,\"Login\"),/*#__PURE__*/React.createElement(\"span\",{className:\"flexbox-wrapper\"},/*#__PURE__*/React.createElement(\"label\",{className:\"flexbox-item\",for:\"userid\"},\"Employee ID\"),/*#__PURE__*/React.createElement(\"input\",{className:\"flexbox-item\",type:\"text\",id:\"userid\",placeholder:\"loginID\",value:userid,onChange:function onChange(e){return changeField('userId',e);}})),/*#__PURE__*/React.createElement(\"span\",{className:\"flexbox-wrapper\"},/*#__PURE__*/React.createElement(\"label\",{className:\"flexbox-item\",for:\"pw\"},\"Password\"),/*#__PURE__*/React.createElement(\"input\",{className:\"flexbox-item\",type:\"text\",id:\"pw\",placeholder:\"password\",value:password,onChange:function onChange(e){return changeField('password',e);}})),/*#__PURE__*/React.createElement(\"button\",{onClick:logInApiRequest,id:\"login\"},\"Login\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"flexbox-centered flexbox-item flexbox-wrapper vertical\"},_errorsBuild()));};return isRedirectingHome?/*#__PURE__*/React.createElement(Redirect,{to:\"/\"}):buildForm();};export default Login;","map":{"version":3,"sources":["D:/Documents/Classes/SimpleSchedule/employee/src/pages/LoginPage.js"],"names":["React","useState","Redirect","logo","Axios","Login","props","newJwtNotify","userid","setUserId","password","setPassword","errors","setErrors","isRedirectingHome","setToHome","changeField","fieldName","eventDetails","target","value","logInApiRequest","post","then","apiResponse","jwt","data","catch","apiError","response","map","x","msg","_errorsBuild","e","i","buildForm"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\r\nimport { Redirect } from 'react-router-dom'\r\nimport logo from './../images/Slogo.png'\r\nimport Axios from 'axios'\r\n\r\nconst Login = (props) => {\r\n    \r\n    const { newJwtNotify } = props\r\n    const [userid, setUserId] = useState('unclefifi')\r\n    const [password, setPassword] = useState('password')\r\n    const [errors, setErrors] = useState([])\r\n    const [isRedirectingHome, setToHome] = useState(false)\r\n\r\n\r\n    const changeField = (fieldName, eventDetails) => {\r\n        if(eventDetails && eventDetails.target && typeof eventDetails.target.value === \"string\") {\r\n            const value = eventDetails.target.value\r\n            if(fieldName==='userId') {\r\n                setUserId(value)\r\n            } else if(fieldName==='password') {\r\n                setPassword(value)\r\n            }\r\n        }\r\n    }\r\n\r\n    const logInApiRequest = () => {\r\n        Axios.post('/api/users/authenticate', { userid, password }).then((apiResponse)=> {\r\n            \r\n            const jwt = apiResponse.data\r\n            newJwtNotify(jwt)\r\n            setToHome(true)\r\n\r\n        }).catch((apiError) => {\r\n\r\n            // errors is an array of { msg: string }\r\n            if(apiError && apiError.response && apiError.response.data && apiError.response.data.errors) {\r\n                setErrors(apiError.response.data.errors.map(x => x.msg))\r\n            }\r\n\r\n        })\r\n    }\r\n    \r\n    const _errorsBuild = () => errors.map((e,i) => <div key={e}>{i+1}.) {e}</div>)\r\n\r\n    const buildForm = () => <div className=\"flexbox-wrapper flexbox-item vertical\">\r\n                        \r\n                        <div className=\"flexbox-item\">\r\n                            <img id=\"loginLogo\" src={logo} alt=\"Logo\" />\r\n                        </div>\r\n\r\n                        <div className=\"flexbox-centered flexbox-wrapper\">\r\n                            <div className=\"flexbox-wrapper login vertical\">\r\n                                <h3>Login</h3>\r\n                                <span className=\"flexbox-wrapper\">\r\n                                    <label className=\"flexbox-item\" for=\"userid\">Employee ID</label>\r\n                                    <input \r\n                                        className=\"flexbox-item\"\r\n                                        type=\"text\" \r\n                                        id=\"userid\" \r\n                                        placeholder=\"loginID\"\r\n                                        value={userid}\r\n                                        onChange={(e) => changeField('userId',e)}\r\n                                    />\r\n                                </span>\r\n                                <span className=\"flexbox-wrapper\">\r\n                                    <label className=\"flexbox-item\" for=\"pw\">Password</label>\r\n                                    <input \r\n                                        className=\"flexbox-item\"\r\n                                        type=\"text\" \r\n                                        id=\"pw\" \r\n                                        placeholder=\"password\"\r\n                                        value={password}\r\n                                        onChange={(e) => changeField('password',e)}\r\n                                    />\r\n                                </span>\r\n                                <button onClick={logInApiRequest} id=\"login\">Login</button>\r\n                            </div>\r\n                        </div>\r\n\r\n\r\n                        <div className=\"flexbox-centered flexbox-item flexbox-wrapper vertical\">\r\n                            {_errorsBuild()}\r\n                        </div>\r\n                    </div>\r\n\r\n    return isRedirectingHome ? <Redirect to=\"/\"/> : buildForm()\r\n\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}